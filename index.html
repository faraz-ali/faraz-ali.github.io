<!DOCTYPE html>
<html>

<head>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" type="text/css" href="index.css">

   <!-- Load d3.js -->
   <script src="https://d3js.org/d3.v4.js"></script>
   <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
   <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

   <script src="map.js"></script>
   <script src="bar2.js"></script>
   <script src="pie.js"></script>
   <script src="pie2.js"></script>

</head>

<body>
   <h1>COVID-19 Pandemic Affect on Global Death Rates</h1>
   <p>Click on the buttons inside the tabbed menu to change scenes:</p>
   <div class="tab">
      <button class="tablinks" onclick="openScene(event, 'Overview')">About the Visualization</button>
      <button class="tablinks" onclick="openScene(event, 'WorldMap')">World Map</button>
      <button class="tablinks" onclick="openScene(event, 'BarChart')">Countries Ranked</button>
      <button class="tablinks" onclick="openScene(event, 'PieChart')">Severely Affected Countries</button>
      <button class="tablinks" onclick="openScene(event, 'PieChart2')">Lesser Affected Countries</button>
   </div>

   <div id="Overview" class="tabcontent">
      <p>
         <br>
         <b>Overview: </b>
         <br>
         This narrative visualization helps the viewer to understand: <b>How is the pandemic affecting the global
            expected death rate?</b>
         <br>
         Given the data from 24 countries, and filtered for the period from January 2020 â€“ May 2020, we compare the
         death rates to the expected baseline death rates in these countries.
         <br><br>
         <b>Dataset: </b></Dataset>
         <br>
         <a href="https://github.com/nytimes/covid-19-data/tree/master/excess-deaths">NY
            Times COVID-19
            Excess Deaths Dataset</a>
      </p>
      <p>
         <br>
         Please Click on the button below to start the narrative, or interact with the buttons in the tab above.
         <br>
         <br>
         <button onclick="openScene(event, 'WorldMap')">Start Narrative</button>
      </p>
   </div>

   <div id="WorldMap" class="tabcontent">
      <h3>COVID-19 World Choropleth</h3>
      <p>Learn about the impact of COVID-19 pandemic worldwide. Countries which are less affected, and have fewer deaths
         than expected, are shown in a green tone. Whereas, the countries severely affected are shown in a red tone.
         Countries are toned out where the data is not available.
         <button onclick="openScene(event, 'Overview')">Previous Slide</button>
         <button onclick="openScene(event, 'BarChart')">Next Slide</button>
      </p>
   </div>

   <div id="BarChart" class="tabcontent">
      <h3>Ranked Countries</h3>
      <p>The bar chart plots the excess deaths in a descending sorted order, from the countries with the highest deaths
         to the ones with the lowest.
         The viewer can further engage with the individual bar chart to get exact numbers, which may not be obvious from
         the x-axis tick points.

         <button onclick="openScene(event, 'WorldMap')">Previous Slide</button>
         <button onclick="openScene(event, 'PieChart')">Next Slide</button>
      </p>
   </div>

   <div id="PieChart" class="tabcontent">
      <h3>Severely Affected Countries</h3>
      <p>This is a filtered drill down scene where the user can focus only on the countries where the death toll was
         higher than
         expected. The color coded regions with annotated names, and tooltips provide the viewer the ability to further
         drill down into the scene to gain exact figures and numbers.
         <button onclick="openScene(event, 'PieChart')">Previous Slide</button>
         <button onclick="openScene(event, 'PieChart2')">Next Slide</button>
      </p>
   </div>
   <div id="PieChart2" class="tabcontent">
      <h3>Lesser Affected Countries</h3>
      <p>This is a filtered drill down scene where the user can focus only on the countries where the death toll was
         lower than
         expected. The color coded regions with annotated names, and tooltips provide the viewer the ability to further
         drill down into the scene to gain exact figures and numbers.
         <button onclick="openScene(event, 'PieChart')">Previous Slide</button>
         <button onclick="openScene(event, 'Overview')">Home</button>
      </p>
   </div>

   <div>
      <br>
      <br>
      <script>
         function openScene(evt, visName) {
            var i, tabcontent, tablinks;
            d3.select("svg").remove();
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
               tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
               tablinks[i].className = tablinks[i].className.replace(" active", "");
               tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(visName).style.display = "block";
            if (evt !== 0)
               evt.currentTarget.className += " active";
            if (visName === 'BarChart')
               barChart.display();
            if (visName === 'WorldMap')
               worldMap.display();
            if (visName === 'PieChart')
               pieChart.display();
            if (visName === 'PieChart2')
               pieChart2.display();
            if (visName === 'Overview')
               tablinks[0].className += " active";
         }
         openScene(0, 'Overview');
      </script>
   </div>
</body>

</html>